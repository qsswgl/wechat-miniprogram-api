# QSGL WeChat API Docker 部署命令
# 请在Ubuntu服务器上执行以下命令：

# 进入项目目录并清理
cd /opt/qsgl-api/wechatminiprogramapi

# 一键部署命令（复制粘贴执行）：
cd /opt/qsgl-api/wechatminiprogramapi && rm -rf docker-deploy/ && rm -f qsgl-api-docker.zip && docker system prune -f && docker-compose down && docker-compose build --no-cache --pull && docker-compose up -d && docker-compose ps

# 分步执行命令：
# 1. 清理重复文件
rm -rf docker-deploy/
rm -f qsgl-api-docker.zip

# 2. 清理Docker缓存
docker system prune -f

# 3. 停止现有容器
docker-compose down

# 4. 重新构建镜像
docker-compose build --no-cache --pull

# 5. 启动服务
docker-compose up -d

# 6. 查看状态
docker-compose ps

# 7. 查看日志
docker-compose logs --tail=20

# 访问地址：
# HTTP:  http://123.57.93.200:8080/swagger
# HTTPS: https://123.57.93.200:8081/swagger