# 调试Docker容器重启问题

# 1. 查看详细日志
docker-compose logs --tail=50 wechat-api

# 或者直接查看容器日志
docker logs f01d412cc0b4

# 2. 查看容器内部环境
docker exec -it qsgl-wechat-api /bin/bash
# 如果无法进入，尝试：
docker run -it --rm wechatminiprogramapi-wechat-api /bin/bash

# 3. 检查.NET运行时
docker run -it --rm wechatminiprogramapi-wechat-api dotnet --info

# 4. 手动启动应用
docker run -it --rm -p 8080:8080 wechatminiprogramapi-wechat-api dotnet WeChatMiniProgramAPI.dll

# 5. 检查文件权限
docker run -it --rm wechatminiprogramapi-wechat-api ls -la /app

# 6. 重新构建并调试
docker-compose down
docker-compose build --no-cache
docker-compose up --no-detach

# 常见解决方案：
# - 退出代码139通常是内存访问错误
# - 可能是.NET运行时版本不匹配
# - 或者是容器基础镜像问题